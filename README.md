# ‚öôÔ∏è HexForge Labs ‚Äì Full Stack AI-Powered Web Platform

This is the complete repository for the [HexForge Labs](https://hexforgelabs.com) website and backend platform ‚Äî a custom e-commerce and interactive lab assistant system developed by Robert Duff.

---

## Engine Identity
Surface Engine consumes heightmaps to produce functional, modular enclosure geometry for electronics. It is infrastructure for Raspberry Pi-first enclosures, not a generic art generator.

## üöÄ Features

* **üõí Full-Stack Storefront**
  React + Express-based online shop with MongoDB, Docker, and Stripe integration

* **üîê Admin Dashboard**
  Secure login system, product management, and order tracking

* **ü§ñ AI Assistant (Lab Agent)**
  Embedded chat assistant with support for commands, tools, memory, and server integration

* **üì¶ Tools & Scripts**
  Modular backend tool registry, system queries, automation endpoints, and developer scripts

---

## üìÅ Project Structure

```
.
‚îú‚îÄ‚îÄ frontend/           # React frontend (store, chat, admin)
‚îú‚îÄ‚îÄ backend/            # Express backend (API, DB, auth, routes)
‚îú‚îÄ‚îÄ assistant/          # AI agent, tool system, LLM integration
‚îú‚îÄ‚îÄ nginx/              # NGINX config & reverse proxy files
‚îú‚îÄ‚îÄ test-files/         # Setup & test scripts
‚îî‚îÄ‚îÄ docker-compose.yml  # Full stack deployment
```

---

## ‚ö†Ô∏è Development Status

> This project is in **active development** and is not yet ready for public use or redistribution.
> Many components are experimental or tightly coupled with HexForge's infrastructure.

---

## üîí License

This repository is protected under a **temporary development license**.
You may read the code and use **small snippets** for learning purposes, but **reuse, redistribution, or deployment** is not allowed at this stage.

See [LICENSE.txt](./LICENSE.txt) for full terms.

---

## üß™ Surface smoke / E2E helpers

Use `BASE_URL` as the canonical endpoint (auto-falls back to `SURFACE_SMOKE_BASE_URL` / `SURFACE_BASE_URL`, default `https://localhost`). `http://localhost` is allowed but will be auto-upgraded to `https://localhost`. Set `CURL_INSECURE=1` only for local self-signed TLS.

- Local (self-signed):
  - `CURL_INSECURE=1 BASE_URL=https://localhost HEIGHTMAP_URL="<public heightmap png>" \`
    `./scripts/smoke_surface_stack.sh`
  - `CURL_INSECURE=1 BASE_URL=https://localhost ./scripts/smoke_surface_ui_check.sh "<job_id>"`
  - `CURL_INSECURE=1 BASE_URL=https://localhost HEIGHTMAP_URL="<public heightmap png>" \`
    `./scripts/e2e_surface_proof.sh`
- Live (public certs):
  - `BASE_URL=https://hexforgelabs.com HEIGHTMAP_URL="<public heightmap png>" \`
    `./scripts/smoke_surface_stack.sh`
  - `BASE_URL=https://hexforgelabs.com ./scripts/smoke_surface_ui_check.sh "<job_id>"`
  - `BASE_URL=https://hexforgelabs.com HEIGHTMAP_URL="<public heightmap png>" \`
    `./scripts/e2e_surface_proof.sh`

---

  ## üì¶ Promote Surface Job ‚Üí Product

  Admins can convert a completed surface job into a store product and freeze the generated asset URLs.

  - **Endpoint (admin-only, session cookie):** `POST /api/products/from-surface-job`
  - Requires: `job_id`, optional `subfolder`, plus `title`, `price`, `category`, `description`, `tags`, `sku`, `freeze_assets`.
  - Validation: job status must be `complete`, hero preview and STL must exist in the manifest. URLs are resolved from `manifest.public.*`, `public_root`, or `/assets/surface/<subfolder>/<job_id>/...`.
  - Assets captured as `ProductAsset` rows: hero preview, STL, textures (if present), heightmap (if present), manifest URL.

  Example (assumes admin session cookie already issued via `/api/auth/login`):

  ```
  curl -X POST http://localhost:8000/api/products/from-surface-job \
    -H "Content-Type: application/json" \
    -b "hexforge.sid=<admin-session-cookie>" \
    -d '{
      "job_id": "abc123",
      "subfolder": "smoke-test",
      "title": "Relief Shell",
      "price": 129.00,
      "category": "surface",
      "description": "Relief enclosure auto-generated by Surface Engine",
      "tags": ["surface", "relief"],
      "freeze_assets": true
    }'
  ```

  Successful response returns the created product JSON (status `draft` by default) and the captured asset URLs.

  ---

## üì¨ Contact

For questions, feedback, or collaboration inquiries:

**Robert Duff**
üìß [rduff@hexforgelabs.com](mailto:rduff@hexforgelabs.com)
üåê [https://hexforgelabs.com](https://hexforgelabs.com)

---
