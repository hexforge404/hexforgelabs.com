# /etc/nginx/snippets/assistant-cors-preflight.conf
# Handles CORS OPTIONS preflight requests for Assistant routes

if ($request_method = OPTIONS) {
    add_header Access-Control-Allow-Origin "https://hexforgelabs.com" always;
    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS" always;
    add_header Access-Control-Allow-Headers "Origin, Content-Type, Accept, Authorization" always;
    add_header Access-Control-Allow-Credentials "true" always;
    add_header Content-Length 0;
    add_header Content-Type text/plain;
    return 204;
}
